<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Shadow Wear ‚Äî Premium Purple</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container header-row">
        <button class="icon-btn" id="menuBtn" aria-label="Menu">‚ò∞</button>
        <a class="brand" href="#">Shadow Wear</a>
        <div class="search-wrap">
          <input id="searchInput" class="input" type="search" placeholder="Search products‚Ä¶" aria-label="Search products" />
        </div>
        <nav class="nav-actions" aria-label="Primary actions">
          <button class="icon-btn" id="themeToggle" aria-label="Toggle theme">üåì</button>
          <a class="icon-btn" href="#admin" title="Admin" aria-label="Admin">‚öôÔ∏è</a>
          <button class="icon-btn" id="openCart" aria-label="Open cart">
            üõí
            <span class="badge" id="cartCount">0</span>
          </button>
        </nav>
      </div>
    </header>

    <main class="container">
      <section class="hero">
        <div class="hero-copy">
          <h1>Elevate your fit</h1>
          <p>Premium drops, timeless basics, and clean silhouettes.</p>
          <a class="cta" href="#popular">Explore</a>
        </div>
        <img
          class="hero-img"
          src="https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=1200&auto=format&fit=crop&q=80"
          alt="Shadow Wear look"
          loading="lazy"
        />
      </section>

      <div class="pills" id="filters" role="tablist" aria-label="Category filters">
        <button class="pill active" data-filter="all" type="button">All</button>
        <button class="pill" data-filter="Men" type="button">Men</button>
        <button class="pill" data-filter="Women" type="button">Women</button>
        <button class="pill" data-filter="Kids" type="button">Kids</button>
      </div>

      <section id="popular" class="section">
        <h2 class="section-title">Most Popular</h2>
        <div class="grid" id="productsGrid" aria-live="polite"></div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container">
        <p>¬© <span id="year"></span> Shadow Wear. All rights reserved.</p>
      </div>
    </footer>

    <aside class="cart-drawer" id="cartDrawer" aria-hidden="true" aria-label="Shopping cart">
      <div class="cart-header">
        <h3>Cart</h3>
        <button class="icon-btn" id="closeCart" aria-label="Close cart">‚úñ</button>
      </div>
      <div class="cart-body" id="cartItems"></div>
      <div class="cart-footer">
        <div class="totals">
          <div class="row"><span>Subtotal</span><span id="subtotalVal">MAD 0.00</span></div>
          <div class="row"><span>Shipping</span><span id="shippingVal">MAD 0.00</span></div>
          <div class="row total"><span>Total</span><span id="totalVal">MAD 0.00</span></div>
        </div>
        <details class="checkout-details">
          <summary>Customer Info</summary>
          <div class="form-grid">
            <input id="custName" class="input" placeholder="Full name" aria-label="Customer full name" />
            <input id="custPhone" class="input" placeholder="Phone" aria-label="Customer phone" />
            <input id="custCity" class="input" placeholder="City" aria-label="Customer city" />
            <input id="custAddress" class="input" placeholder="Address" aria-label="Customer address" />
            <input id="custNote" class="input" placeholder="Note (optional)" aria-label="Customer note" />
          </div>
        </details>
        <div class="promo-row">
          <input id="promoInput" class="input" placeholder="Promo code" aria-label="Promo code" />
          <button id="applyPromo" class="btn-secondary" type="button">Apply</button>
        </div>
        <button class="btn-primary" id="checkoutWhatsApp" type="button">Send Order via WhatsApp</button>
      </div>
    </aside>
    <div class="drawer-backdrop" id="drawerBackdrop" hidden aria-hidden="true"></div>

    <section class="admin" id="adminView" hidden>
      <div class="container admin-wrap">
        <div class="admin-header-row">
          <h2>Admin ‚Äî Quick Search</h2>
          <button class="btn-secondary" id="adminLogout" type="button">Log out</button>
        </div>
        <div class="admin-controls">
          <input id="adminSearch" class="input" placeholder="Search by name or ID‚Ä¶" aria-label="Search products in admin" />
          <div class="toggle" role="radiogroup" aria-label="Admin search mode">
            <label><input type="radio" name="mode" value="name" checked /> Name</label>
            <label><input type="radio" name="mode" value="id" /> ID</label>
          </div>
        </div>
        <div class="admin-table" id="adminResults" aria-live="polite"></div>
      </div>
    </section>

    <div id="toast" aria-live="polite" aria-atomic="true"></div>

    <script>
      // Handle Netlify Identity requests on localhost
      if (window.location.hostname === '127.0.0.1' || window.location.hostname === 'localhost') {
        const originalFetch = window.fetch;
        window.fetch = function(url, options) {
          if (typeof url === 'string' && url.includes('/.netlify/identity/')) {
            return Promise.resolve({
              ok: false,
              status: 404,
              statusText: 'Not Found',
              json: () => Promise.resolve({ error: 'Netlify Identity not available in local development' })
            });
          }
          return originalFetch.apply(this, arguments);
        };
      }
    </script>
    <script src="app.js" defer></script>
  </body>
</html>
